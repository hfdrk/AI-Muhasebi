# AI Muhasebi - Environment Configuration Example
# Copy this file to .env and fill in the values for your environment

# ============================================================================
# Common Configuration
# ============================================================================

# Environment: development, staging, or production
NODE_ENV=development

# Logging level: debug, info, warn, or error
LOG_LEVEL=info

# ============================================================================
# Backend API Configuration
# ============================================================================

# Backend server port (default: 3800)
PORT=3800
BACKEND_PORT=3800

# Database connection URL (PostgreSQL)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:ai_muhasebi_dev@localhost:5432/ai_muhasebi

# Test database URL (optional, for running tests)
DATABASE_URL_TEST=postgresql://postgres:ai_muhasebi_dev@localhost:5432/ai_muhasebi_test

# JWT secret for token signing (must be at least 32 characters)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-change-in-production

# JWT token expiry
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# CORS origin (frontend URL)
# If not set, FRONTEND_URL will be used
CORS_ORIGIN=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# API URL (optional, for internal service communication)
API_URL=http://localhost:3800

# ============================================================================
# Worker Jobs Configuration
# ============================================================================

# Number of concurrent jobs the worker can process (1-100, default: 5)
WORKER_CONCURRENCY=5

# ============================================================================
# Web App Configuration
# ============================================================================

# Public API base URL (used by Next.js frontend)
# This must be a NEXT_PUBLIC_ variable to be accessible in the browser
NEXT_PUBLIC_API_BASE_URL=http://localhost:3800

# ============================================================================
# Email Configuration
# ============================================================================

# Email transport: "stub" (for development/testing) or "smtp" (for production)
EMAIL_TRANSPORT=stub

# Default "from" email address
EMAIL_FROM_DEFAULT=noreply@ai-muhasebi.local

# SMTP Configuration (required if EMAIL_TRANSPORT=smtp)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@example.com

# ============================================================================
# Storage Configuration
# ============================================================================

# Storage type: local, s3, gcs, or azure
STORAGE_TYPE=local

# Base path for local storage (relative to backend-api directory)
STORAGE_BASE_PATH=./storage

# Storage bucket name (for cloud storage)
STORAGE_BUCKET_NAME=

# S3 / MinIO configuration (required when STORAGE_TYPE=s3)
STORAGE_REGION=eu-central-1
STORAGE_ACCESS_KEY_ID=
STORAGE_SECRET_ACCESS_KEY=
STORAGE_ENDPOINT=        # For MinIO/DigitalOcean Spaces (e.g. http://minio:9000)

# Maximum file size in bytes (default: 20MB)
STORAGE_MAX_FILE_SIZE=20971520

# Allowed MIME types (comma-separated)
STORAGE_ALLOWED_MIME_TYPES=application/pdf,image/jpeg,image/png,image/jpg,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

# ============================================================================
# Feature Flags
# ============================================================================

# Enable reporting features
REPORTING_ENABLED=true

# Enable PDF export
PDF_EXPORT_ENABLED=true

# Enable Excel export
EXCEL_EXPORT_ENABLED=true

# Enable scheduled reports
SCHEDULED_REPORTS_ENABLED=true

# ============================================================================
# Optional Configuration
# ============================================================================

# Redis URL (required in production for caching, rate limiting, sessions)
REDIS_URL=

# Sentry DSN (optional, for error tracking)
SENTRY_DSN=

# Database connection pool size (1-50, default auto)
DATABASE_POOL_SIZE=

# ============================================================================
# Deployment / Docker
# ============================================================================

# PostgreSQL credentials (used by docker-compose)
POSTGRES_USER=ai_muhasebi
POSTGRES_PASSWORD=
POSTGRES_DB=ai_muhasebi

# MinIO credentials (used by docker-compose for S3-compatible storage)
MINIO_USER=minioadmin
MINIO_PASSWORD=

# Landing page app URL (used to link CTAs to main web app)
NEXT_PUBLIC_APP_URL=http://localhost:3010
